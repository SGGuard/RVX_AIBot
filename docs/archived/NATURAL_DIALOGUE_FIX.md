# üéØ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ï–°–¢–ï–°–¢–í–ï–ù–ù–´–ô –î–ò–ê–õ–û–ì v0.21.1

## ‚úÖ –ü—Ä–æ–±–ª–µ–º—ã v0.21.0 (–∫–æ—Ç–æ—Ä—ã–µ —Ç—ã –≤–∏–¥–µ–ª –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ)

**–ß—Ç–æ –±—ã–ª–æ –Ω–µ —Ç–∞–∫:**
- ‚ùå –û—Ç–≤–µ—Ç—ã –≤—ã–≥–ª—è–¥–µ–ª–∏ –∫–∞–∫ –∑–∞—Å–∫—Ä–∏–ø—Ç–æ–≤–∞–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã
- ‚ùå "–° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º, –¥—Ä—É–∂–µ!" –∑–≤—É—á–∞–ª –Ω–µ–∂–∏–≤–æ
- ‚ùå Follow-up –≤–æ–ø—Ä–æ—Å "–ß—Ç–æ —Ç—ã —É–º–µ–µ—à—å?" –Ω–µ –ø–æ–ª—É—á–∞–ª —Å–≤—è–∑–Ω—ã–π –æ—Ç–≤–µ—Ç
- ‚ùå –î–∏–∞–ª–æ–≥ –∫–∞–∑–∞–ª—Å—è —Ä–æ–±–æ—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º, –Ω–µ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–º
- ‚ùå –ö–æ–Ω—Ç–µ–∫—Å—Ç —Å–æ—Ö—Ä–∞–Ω—è–ª—Å—è –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –¥–ª—è –∂–∏–≤–æ–≥–æ –æ–±—â–µ–Ω–∏—è

## üéâ –†–µ—à–µ–Ω–∏—è –≤ v0.21.1

### 1. üó£Ô∏è **–ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞**

```python
# –§–∞–π–ª: natural_dialogue.py
# 450+ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ –¥–ª—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –æ–±—â–µ–Ω–∏—è
```

**–ß—Ç–æ –ø–æ—è–≤–∏–ª–æ—Å—å:**
- ‚úÖ `get_natural_response()` - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
- ‚úÖ `_handle_followup()` - —É–º–Ω—ã–µ follow-up –≤–æ–ø—Ä–æ—Å—ã  
- ‚úÖ `_handle_question()` - –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- ‚úÖ `_handle_general_chat()` - –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –±–µ—Å–µ–¥–∞
- ‚úÖ –í–∞—Ä–∏–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ `random.choice()` - –Ω–µ –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è —à–∞–±–ª–æ–Ω—ã

### 2. üìù **–ü—Ä–∏–º–µ—Ä—ã –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤**

**–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ:**
```
User:  "–ü—Ä–∏–≤–µ—Ç!"
Bot:   "–•–µ–π! üòä –ß–µ–º —è –º–æ–≥—É –ø–æ–º–æ—á—å?" 
       (–∞ –Ω–µ "–° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º, –¥—Ä—É–∂–µ!" ‚ùå)
```

**Follow-up –≤–æ–ø—Ä–æ—Å:**
```
User:  "–ß—Ç–æ —Ç—ã —É–º–µ–µ—à—å?"
Bot:   "–Ø —É–º–µ—é:
        üì∞ –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫—Ä–∏–ø—Ç–æ-–Ω–æ–≤–æ—Å—Ç–∏
        üìä –û–±—ä—è—Å–Ω—è—Ç—å —Ç—Ä–µ–Ω–¥—ã –Ω–∞ —Ä—ã–Ω–∫–µ
        üí° –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø—Ä–æ –∫—Ä–∏–ø—Ç–æ
        üéì –£—á–∏—Ç—å –ø—Ä–æ DeFi –∏ Web3
        üí∞ –ü–æ–º–æ–≥–∞—Ç—å —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ –ø–æ—Ä—Ç—Ñ–µ–ª–µ
        
        –û—Ç–ø—Ä–∞–≤—å –º–Ω–µ –Ω–æ–≤–æ—Å—Ç—å –∏–ª–∏ –∑–∞–¥–∞–π –≤–æ–ø—Ä–æ—Å! üöÄ"
```

**–í–æ–ø—Ä–æ—Å —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º:**
```
User:  "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–ª–æ–∫—á–µ–π–Ω?"
Bot:   "Bitcoin? –≠—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ! üîê 
        –≠—Ç–æ –¥–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –≤–∞–ª—é—Ç–∞...
        
        –•–æ—á–µ—à—å —É–∑–Ω–∞—Ç—å –ø—Ä–æ —Ü–µ–Ω—É, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—é –∏–ª–∏ –∏—Å—Ç–æ—Ä–∏—é? üìä"
```

### 3. üîß **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ bot.py**

**–°—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞:**
```python
response = get_conversational_response(user_text, UserLevel.BEGINNER)
# ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç, –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª–∞ –∏—Å—Ç–æ—Ä–∏—é
```

**–ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞:**
```python
# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –Ω–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É
from natural_dialogue import get_conversational_response_improved

# –ü–æ–ª—É—á–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
context = get_conversation_history(user.id, limit=5)

# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
response = get_conversational_response_improved(
    user_text,      # –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    intent,         # –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è (follow_up, question, general_chat)
    user.id,        # ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è
    context         # –ò—Å—Ç–æ—Ä–∏—è –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 5 —Å–æ–æ–±—â–µ–Ω–∏–π
)

# –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é
save_conversation(user.id, "bot", response, intent)
```

## üìä –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### –°–∏—Å—Ç–µ–º–∞ –æ—Ç–≤–µ—Ç–æ–≤

| –°—Ü–µ–Ω–∞—Ä–∏–π | v0.21.0 ‚ùå | v0.21.1 ‚úÖ |
|----------|-----------|----------|
| –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ | "–° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º, –¥—Ä—É–∂–µ!" | "–•–µ–π! üòä –ß–µ–º –ø–æ–º–æ—á—å?" |
| Follow-up | –ü—É—Ç–∞–µ—Ç—Å—è | –ü–æ–Ω–∏–º–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç |
| –û–±—â–µ–Ω–∏–µ | –ó–∞—Å–∫—Ä–∏–ø—Ç–æ–≤–∞–Ω–æ | –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ |
| –í–æ–ø—Ä–æ—Å—ã | –û–¥–∏–Ω –æ—Ç–≤–µ—Ç | –†–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ |
| –ò—Å—Ç–æ—Ä–∏—è | –°–æ—Ö—Ä–∞–Ω—è–ª–∞—Å—å | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –æ—Ç–≤–µ—Ç–∞—Ö |

### –ö–∞—á–µ—Å—Ç–≤–æ –¥–∏–∞–ª–æ–≥–∞

```
–î–û (v0.21.0):
User: "–ü—Ä–∏–≤–µ—Ç!"
Bot:  "–° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º, –¥—Ä—É–∂–µ!" 
      (–≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ —Å—Ç–∞—Ä—ã–π —á–∞—Ç–±–æ—Ç 2010-—Ö –≥–æ–¥–æ–≤)

User: "–ß—Ç–æ —Ç—ã —É–º–µ–µ—à—å?"
Bot:  (–Ω–µ –∑–Ω–∞–µ—Ç —á—Ç–æ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω–æ)

User: "–ü–æ—á–µ–º—É?"
Bot:  (–Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç –æ —á–µ–º —Ä–µ—á—å)


–ü–û–°–õ–ï (v0.21.1):
User: "–ü—Ä–∏–≤–µ—Ç!"
Bot:  "–ü—Ä–∏–≤–µ—Ç! üëã –†–∞–¥ –≤–∏–¥–µ—Ç—å —Ç–µ–±—è!
       –û—Ç–ø—Ä–∞–≤—å –º–Ω–µ –Ω–æ–≤–æ—Å—Ç—å –ø—Ä–æ –∫—Ä–∏–ø—Ç–æ! üì∞"
      (–≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ —Ä–µ–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫)

User: "–ß—Ç–æ —Ç—ã —É–º–µ–µ—à—å?"
Bot:  "–Ø —É–º–µ—é:
       üì∞ –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫—Ä–∏–ø—Ç–æ-–Ω–æ–≤–æ—Å—Ç–∏
       ... (—Å–ø–∏—Å–æ–∫ —Å —ç–º–æ–¥–∑–∏)
       –û—Ç–ø—Ä–∞–≤—å –º–Ω–µ –Ω–æ–≤–æ—Å—Ç—å –∏–ª–∏ –∑–∞–¥–∞–π –≤–æ–ø—Ä–æ—Å! üöÄ"

User: "–ü–æ—á–µ–º—É?"
Bot:  "–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å! üéØ –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä–µ–º—Å—è...
       –°–∫–∞–∂–∏ –º–Ω–µ —Ç–æ—á–Ω–µ–µ, —á—Ç–æ —Ç–µ–±—è –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç! üí°"
```

## üöÄ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü–æ—Ç–æ–∫ –¥–∏–∞–ª–æ–≥–∞

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
   ‚Üì
2. bot.py: classify_intent() –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø (follow_up, question, etc)
   ‚Üì
3. bot.py: get_conversation_history() –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç
   ‚Üì
4. natural_dialogue.py: get_natural_response() –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç
   ‚Üì
5. –û—Ç–≤–µ—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç:
   - –¢–∏–ø–∞ –Ω–∞–º–µ—Ä–µ–Ω–∏—è (follow_up = —Å–≤—è–∑–Ω—ã–π, question = –∏–Ω—Ñ–æ, etc)
   - –ö–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏
   - –ü—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏–Ω—Ç–µ—Ä–µ—Å—ã, –ø–æ—Ä—Ç—Ñ–µ–ª—å)
   - –ò—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞
   ‚Üì
6. –í–∞—Ä–∏–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ (random.choice) = –Ω–µ —Å–∫—É—á–Ω–æ
   ‚Üì
7. –û—Ç–≤–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏—é
   ‚Üì
8. –°–ª–µ–¥—É—é—â–∏–π follow-up –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–µ—Å—å –∫–æ–Ω—Ç–µ–∫—Å—Ç
```

## üìÅ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

**natural_dialogue.py** (450 —Å—Ç—Ä–æ–∫)
- `get_natural_response()` - –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
- `_handle_followup()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —É—Ç–æ—á–Ω—è—é—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
- `_handle_question()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–æ–ø—Ä–æ—Å–æ–≤
- `_handle_general_chat()` - –æ–±—â–∞—è –±–µ—Å–µ–¥–∞
- 10+ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞
- 50+ –ø—Ä–∏–º–µ—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã
python3 natural_dialogue.py

# –†–µ–∑—É–ª—å—Ç–∞—Ç: –≤—Å–µ 7 –ø—Ä–∏–º–µ—Ä–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã ‚úÖ
```

## üéì –†–µ–∑—É–ª—å—Ç–∞—Ç

**–¢–µ–ø–µ—Ä—å –≤–º–µ—Å—Ç–æ:**
```
Bot: "–° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º, –¥—Ä—É–∂–µ! üëã 
      –¢—ã —É–∂–µ –Ω–µ–ø–æ—Ö–æ–∂–µ —Ä–∞–∑–±–∏—Ä–∞–µ—à—å—Å—è! 
      –î–∞–≤–∞–π —É–≥–ª—É–±–∏–º —Ç–≤–æ–∏ –∑–Ω–∞–Ω–∏—è? 
      –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –∫—Ä–∏–ø—Ç–æ-–Ω–æ–≤–æ—Å—Ç–∏ –∏ —É—á—É –æ —Ñ–∏–Ω—Ç–µ—Ö–µ"
```

**–ü–æ–ª—É—á–∞–µ–º:**
```
Bot: "–ü—Ä–∏–≤–µ—Ç! üëã –†–∞–¥ –≤–∏–¥–µ—Ç—å —Ç–µ–±—è!
     –û—Ç–ø—Ä–∞–≤—å –º–Ω–µ –Ω–æ–≤–æ—Å—Ç—å –ø—Ä–æ –∫—Ä–∏–ø—Ç–æ, –∏ —è –µ—ë —Ä–∞–∑–±–µ—Ä—É! üì∞"
     
(–∏–ª–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)

Bot: "–ß—Ç–æ —Ç—ã —É–º–µ–µ—à—å?
     üì∞ –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫—Ä–∏–ø—Ç–æ-–Ω–æ–≤–æ—Å—Ç–∏
     üìä –û–±—ä—è—Å–Ω—è—Ç—å —Ç—Ä–µ–Ω–¥—ã –Ω–∞ —Ä—ã–Ω–∫–µ
     üí° –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø—Ä–æ –∫—Ä–∏–ø—Ç–æ
     ...
     –û—Ç–ø—Ä–∞–≤—å –º–Ω–µ –Ω–æ–≤–æ—Å—Ç—å –∏–ª–∏ –∑–∞–¥–∞–π –≤–æ–ø—Ä–æ—Å! üöÄ"
```

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–î–∏–∞–ª–æ–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ v0.21.1** —Ä–µ—à–∞–µ—Ç –≥–ª–∞–≤–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É:
- ‚úÖ –î–∏–∞–ª–æ–≥ —Ç–µ–ø–µ—Ä—å **–∂–∏–≤–æ–π –∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π**
- ‚úÖ –ù–µ **—Ä–æ–±–æ—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏ –∑–∞—Å–∫—Ä–∏–ø—Ç–æ–≤–∞–Ω—ã–π**
- ‚úÖ **–ü–æ–Ω–∏–º–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç** –∏ follow-up –≤–æ–ø—Ä–æ—Å—ã
- ‚úÖ –û—Ç–≤–µ—Ç—ã **—Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ**, –Ω–µ –ø–æ–≤—Ç–æ—Ä—è—é—Ç —à–∞–±–ª–æ–Ω—ã
- ‚úÖ **–í—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ —Ä–µ–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫**, –∞ –Ω–µ –±–æ—Ç 2010-—Ö

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

**–ß—Ç–æ –¥–∞–ª—å—à–µ:** –¢–µ–ø–µ—Ä—å –¥–∏–∞–ª–æ–≥–∏ –≤—ã–≥–ª—è–¥—è—Ç —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–º–∏! üéâ
