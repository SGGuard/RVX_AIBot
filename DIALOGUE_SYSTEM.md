# ü§ñ –î–∏–∞–ª–æ–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ v0.21.0

## –û–±–∑–æ—Ä

–î–∏–∞–ª–æ–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –±–æ—Ç–∞ –∏–∑ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞ –≤ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ AI –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ —Å **–ø–∞–º—è—Ç—å—é** –∏ **–∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º**.

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞–º–µ—Ä–µ–Ω–∏–π** - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚úÖ **–ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–æ–≤** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞  
‚úÖ **–ü—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** - –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤
‚úÖ **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –∏–Ω—ä–µ–∫—Ü–∏—è** - –ø–µ—Ä–µ–¥–∞—á–∞ –∏—Å—Ç–æ—Ä–∏–∏ –≤ AI –¥–ª—è –ª—É—á—à–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
‚úÖ **–ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** - –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–µ –≤–∞–∂–Ω—ã—Ö –ø—Ä–æ—à–ª—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ë–î —Ç–∞–±–ª–∏—Ü—ã (–Ω–æ–≤—ã–µ)

```sql
-- –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –¥–∏–∞–ª–æ–≥–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
CREATE TABLE conversation_history (
    id INTEGER PRIMARY KEY,
    user_id INTEGER,
    message_type TEXT,        -- "user" –∏–ª–∏ "bot"
    content TEXT,
    intent TEXT,              -- –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è (news_analysis, question, follow_up, general_chat)
    created_at TIMESTAMP
);

-- –ü—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏
CREATE TABLE user_profiles (
    id INTEGER PRIMARY KEY,
    user_id INTEGER UNIQUE,
    interests TEXT,           -- "Bitcoin, DeFi, Ethereum"
    portfolio TEXT,           -- "0.5 BTC, 10 ETH"
    risk_tolerance TEXT,      -- "low", "medium", "high"
    preferred_language TEXT,  -- "russian", "english"
    last_updated TIMESTAMP
);
```

### –§—É–Ω–∫—Ü–∏–∏

#### –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞–º–µ—Ä–µ–Ω–∏–π

```python
classify_intent(text: str) -> str
```

–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –∑–∞–ø—Ä–æ—Å–∞:
- **news_analysis** - –∞–Ω–∞–ª–∏–∑ –∫—Ä–∏–ø—Ç–æ–Ω–æ–≤–æ—Å—Ç–µ–π
- **question** - –≤–æ–ø—Ä–æ—Å—ã –æ–± –æ–±—É—á–µ–Ω–∏–∏
- **follow_up** - —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã (–Ω—É–∂–µ–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç)
- **general_chat** - –æ–±—â–∞—è –±–µ—Å–µ–¥–∞

**–ü—Ä–∏–º–µ—Ä—ã:**
```
"–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π Bitcoin" ‚Üí news_analysis
"–ß—Ç–æ —Ç–∞–∫–æ–µ –±–ª–æ–∫—á–µ–π–Ω?" ‚Üí question
"–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± —ç—Ç–æ–º" ‚Üí follow_up
"–ö–∞–∫ –¥–µ–ª–∞?" ‚Üí general_chat
```

#### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é

```python
save_conversation(user_id: int, message_type: str, content: str, intent: str = None)
```

–í—ã–∑—ã–≤–∞–µ—Ç—Å—è:
- **–í –±–æ—Ç–µ** –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–í API** –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞ –æ—Ç AI

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏

```python
get_conversation_history(user_id: int, limit: int = 10) -> List[dict]
```

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ N —Å–æ–æ–±—â–µ–Ω–∏–π:
```python
[
    {
        "type": "user",
        "content": "–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π —ç—Ç—É –Ω–æ–≤–æ—Å—Ç—å",
        "intent": "news_analysis",
        "timestamp": "2025-12-08 05:20:00"
    },
    ...
]
```

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è–º–∏

```python
# –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
profile = get_user_profile(user_id: int)

# –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
update_user_profile(user_id, interests="Bitcoin", portfolio="1 BTC", risk_tolerance="high")
```

#### –ü–æ–∏—Å–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

```python
search_relevant_context(user_id: int, intent: str, limit: int = 5) -> List[dict]
```

–ò—â–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –∏–Ω—ä–µ–∫—Ü–∏–∏ –≤ –ø—Ä–æ–º–ø—Ç:
- –ï—Å–ª–∏ `intent == "follow_up"` - –∏—â–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 —Å–æ–æ–±—â–µ–Ω–∏–π
- –ò–Ω–∞—á–µ - –∏—â–µ—Ç 5 —Å–æ–æ–±—â–µ–Ω–∏–π —Å —Ç–µ–º –∂–µ –∏–Ω—Ç–µ–Ω—Ç–æ–º

---

## –ü–æ—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### 1Ô∏è‚É£ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ

**–í bot.py:**
```python
# handle_message() —Ñ—É–Ω–∫—Ü–∏—è
intent = classify_intent(user_text)                    # ‚Üê –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
save_conversation(user_id, "user", user_text, intent) # ‚Üê –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ë–î
```

### 2Ô∏è‚É£ –ó–∞–ø—Ä–æ—Å –∏–¥–µ—Ç –Ω–∞ API

**–í api_server.py:**
```python
# /explain_news endpoint
conversation_context = build_conversation_context(user_id)  # ‚Üê –ü–æ–ª—É—á–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é
user_prompt = f"{conversation_context}\n\n{user_text}"      # ‚Üê –ò–Ω—ä–µ–∫—Ç–∏—Ä—É–µ–º

# –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ DeepSeek —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
raw_text = await call_deepseek_with_retry(system_prompt, user_prompt)
```

### 3Ô∏è‚É£ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç

**–í api_server.py:**
```python
# –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç AI
save_conversation(user_id, "bot", formatted_text, "news_analysis")  # ‚Üê –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç
```

### 4Ô∏è‚É£ –°–ª–µ–¥—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç

**–ü—Ä–∏ follow-up –∑–∞–ø—Ä–æ—Å–µ:**
```
–ò—Å—Ç–æ—Ä–∏—è: "Bitcoin –¥–æ—Å—Ç–∏–≥ $100k"
–û—Ç–≤–µ—Ç: "–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç..."
–ù–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å: "–ê –ø–æ—á–µ–º—É?"  ‚Üê –£–∂–µ –∏–º–µ–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –æ Bitcoin!
```

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π –∞–Ω–∞–ª–∏–∑

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "Bitcoin —É–ø–∞–ª –Ω–∞ 10%"
    ‚Üì classify_intent() ‚Üí news_analysis
    ‚Üì save_conversation(user_id, "user", "Bitcoin —É–ø–∞–ª –Ω–∞ 10%", "news_analysis")
    ‚Üì API –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç: []  (–ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ)
    ‚Üì –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ DeepSeek
    ‚Üì –ü–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç
    ‚Üì save_conversation(user_id, "bot", "–∞–Ω–∞–ª–∏–∑...", "news_analysis")

–ë–æ—Ç: "–ê–Ω–∞–ª–∏–∑ –ø–∞–¥–µ–Ω–∏—è Bitcoin..."
```

### –ü—Ä–∏–º–µ—Ä 2: Follow-up –≤–æ–ø—Ä–æ—Å

```
–ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π –Ω–æ–≤–æ—Å—Ç—å –ø—Ä–æ SEC"
2. –ë–æ—Ç: "SEC –æ–¥–æ–±—Ä–∏–ª Bitcoin ETF..."
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ?"  ‚Üê follow_up

    ‚Üì classify_intent() ‚Üí follow_up
    ‚Üì save_conversation(user_id, "user", "–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ?", "follow_up")
    ‚Üì build_conversation_context() –ø–æ–ª—É—á–∞–µ—Ç:
       - SEC –æ–¥–æ–±—Ä–∏–ª Bitcoin ETF...
       - ... (–ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è)
    ‚Üì –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ DeepSeek —Å –ø–æ–ª–Ω—ã–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
    ‚Üì DeepSeek –ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ —Ä–µ—á—å –æ SEC –æ–¥–æ–±—Ä–µ–Ω–∏–∏
    ‚Üì –î–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç

–ë–æ—Ç: "–≠—Ç–æ –≤–∞–∂–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ..."
```

### –ü—Ä–∏–º–µ—Ä 3: –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è

```python
# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∫–∞–∑–∞–ª –∏–Ω—Ç–µ—Ä–µ—Å—ã
update_user_profile(user_id=12345, interests="DeFi, NFTs")

# –ü—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –Ω–æ–≤–æ—Å—Ç–∏ –æ DeFi
# –°–∏—Å—Ç–µ–º–∞ –º–æ–∂–µ—Ç –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ –∏–Ω—Ç–µ—Ä–µ—Å—ã
context = get_user_profile(12345)
# ‚Üí –ú–æ–∂–µ—Ç –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
python3 test_dialogue_system.py
```

**–¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç:**
- ‚úÖ –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞–º–µ—Ä–µ–Ω–∏–π (6 –ø—Ä–∏–º–µ—Ä–æ–≤)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏
- ‚úÖ –ü—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å DeepSeek

### –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –∏–Ω—ä–µ–∫—Ü–∏—è

**–î–æ:** 
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–û–±—ä—è—Å–Ω–∏ –ø–æ—á–µ–º—É?"
DeepSeek: "–ù–µ –ø–æ–Ω–∏–º–∞—é –æ —á–µ–º —Ä–µ—á—å"
```

**–ü–æ—Å–ª–µ:**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–û–±—ä—è—Å–Ω–∏ –ø–æ—á–µ–º—É?"
–ò—Å—Ç–æ—Ä–∏—è: "Bitcoin ETF –æ–¥–æ–±—Ä–µ–Ω"
DeepSeek: "ETF –æ–¥–æ–±—Ä–µ–Ω—ã, –ø–æ—Ç–æ–º—É —á—Ç–æ..."  ‚Üê –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–º–æ–≥–∞–µ—Ç!
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–º–ø—Ç–∞

```python
def build_conversation_context(user_id: int) -> str:
    # –ü–æ–ª—É—á–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 —Å–æ–æ–±—â–µ–Ω–∏–π
    # –§–æ—Ä–º–∏—Ä—É–µ—Ç:
    # –ö–û–ù–¢–ï–ö–°–¢ –ü–†–ï–î–´–î–£–©–ò–• –°–û–û–ë–©–ï–ù–ò–ô:
    # –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨ (news_analysis): "Bitcoin —É–ø–∞–ª..."
    # –ë–û–¢ (news_analysis): "–ê–Ω–∞–ª–∏–∑ –ø–∞–¥–µ–Ω–∏—è..."
    # END CONTEXT
```

---

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è (Phase 6)

- [ ] –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –Ω–∞ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–æ–≤
- [ ] –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
- [ ] –í—ã—è–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Ollama –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- [ ] –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –¥–∏–∞–ª–æ–≥–æ–≤ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

---

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è:** 0.21.0

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- 2 –Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã –ë–î (16 –ø–æ–ª–µ–π)
- 6 –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –∏–Ω—ä–µ–∫—Ü–∏—è –≤ DeepSeek
- Intent –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å 4 –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
- –¢–µ—Å—Ç—ã (6 –ø—Ä–∏–º–µ—Ä–æ–≤ –≤ classify_intent)

**–í—ã–∏–≥—Ä–∞–ª–∏:**
- üéØ –õ—É—á—à–µ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ follow-up –≤–æ–ø—Ä–æ—Å–æ–≤
- üéØ –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ø—Ä–æ—Ñ–∏–ª–∏
- üéØ –ò—Å—Ç–æ—Ä–∏—è –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –æ–±—É—á–µ–Ω–∏—è
- üéØ –û—Å–Ω–æ–≤–∞ –¥–ª—è –±—É–¥—É—â–∏—Ö AI —É–ª—É—á—à–µ–Ω–∏–π

---

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
python3 -m py_compile bot.py api_server.py

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
python3 test_dialogue_system.py

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
python3 -c "from bot import classify_intent; print(classify_intent('–ß—Ç–æ —Ç–∞–∫–æ–µ Bitcoin?'))"

# –°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
tail -f /tmp/api.log
tail -f /tmp/bot.log
```

---

## –ó–∞–º–µ—Ç–∫–∏ –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ –±—É–¥–µ—Ç —Ä–∞—Å—à–∏—Ä—è—Ç—å

1. **–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –∏–Ω—Ç–µ–Ω—Ç–æ–≤:**
   - –û–±–Ω–æ–≤–∏—Ç—å `classify_intent()` —Ñ—É–Ω–∫—Ü–∏—é
   - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –≤ `test_dialogue_system.py`
   - –û–±–Ω–æ–≤–∏—Ç—å —ç—Ç–æ README

2. **–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –ø–æ–ª–µ–π –≤ –ø—Ä–æ—Ñ–∏–ª–∏:**
   - –û–±–Ω–æ–≤–∏—Ç—å `user_profiles` —Ç–∞–±–ª–∏—Ü—É –≤ `init_database()`
   - –î–æ–±–∞–≤–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –≤ `migrate_database()`
   - –û–±–Ω–æ–≤–∏—Ç—å `get_user_profile()` –∏ `update_user_profile()`

3. **–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤ –Ω–æ–≤—ã—Ö –º–µ—Å—Ç–∞—Ö:**
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è `X-User-ID` –∑–∞–≥–æ–ª–æ–≤–æ–∫
   - –í—ã–∑–≤–∞—Ç—å `build_conversation_context(user_id)`
   - –ò–Ω—ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –ø—Ä–æ–º–ø—Ç –∫ AI

---

**–ê–≤—Ç–æ—Ä:** AI Agent  
**–î–∞—Ç–∞:** 2025-12-08  
**–í–µ—Ä—Å–∏—è:** 0.21.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
